-- ONE-TIME INJECTION: paste into Dev Console

local StarterPlayer       = game:GetService("StarterPlayer")
local StarterPlayerScripts = StarterPlayer:WaitForChild("StarterPlayerScripts")
local StarterGui          = game:GetService("StarterGui")

-- don't inject twice
if not StarterPlayerScripts:FindFirstChild("AutoFarmScript") then
    local ls = Instance.new("LocalScript")
    ls.Name = "AutoFarmScript"
    ls.Source = [[
-- AutoFarmScript: persistent farm + GUI + noclip + zero-gravity

local Players    = game:GetService("Players")
local RunService = game:GetService("RunService")
local StarterGui = game:GetService("StarterGui")

local player = Players.LocalPlayer

-- CONFIG
local MAX_COIN_DISTANCE = 150
local COIN_BUFFER       = 1

-- persistent settings
local config = {
    speed           = 22.7,
    fullbag1Enabled = false,
    fullbag2Enabled = false,
    fullbag1Goal    = 40,
    fullbag2Goal    = 20,
    enabled         = true,
}

-- runtime state
local counts1, counts2 = 0, 0
local dirVel, rotVel, forward, targetCoin = Vector3.zero, Vector3.zero, nil, nil

-- Build GUI under StarterGui (so it replicates every respawn)
do
    local sg = Instance.new("ScreenGui")
    sg.Name = "AutoFarmGUI"
    sg.ResetOnSpawn = false
    sg.Parent = StarterGui

    local Frame = Instance.new("Frame", sg)
    Frame.BackgroundColor3 = Color3.fromRGB(54, 41, 57)
    Frame.BorderSizePixel = 0
    Frame.Position = UDim2.new(0.4305,0,0.3941,0)
    Frame.Size     = UDim2.new(0,370,0,258)

    local function mkCorner(parent)
        local c = Instance.new("UICorner", parent)
        return c
    end

    local Title = Instance.new("TextLabel", Frame)
    Title.BackgroundTransparency = 1
    Title.Size   = UDim2.new(1,0,0,40)
    Title.Position = UDim2.new(0,0,0.0488,0)
    Title.Font   = Enum.Font.Unknown
    Title.Text   = "SIgmasSkibidi mm2 universal farm"
    Title.TextColor3 = Color3.new(1,1,1)
    Title.TextSize = 22
    Title.TextWrapped = true

    local function makeLabeledTextbox(labelText, parent, default, pos)
        local lbl = Instance.new("TextLabel", parent)
        lbl.BackgroundTransparency = 1
        lbl.Position = pos
        lbl.Size = UDim2.new(0,100,0,30)
        lbl.Font = Enum.Font.Unknown
        lbl.Text = labelText
        lbl.TextColor3 = Color3.fromRGB(230,230,230)
        lbl.TextSize = 18
        lbl.TextXAlignment = Enum.TextXAlignment.Left

        local tb = Instance.new("TextBox", lbl)
        tb.Size = UDim2.new(0,60,0,22)
        tb.Position = UDim2.new(1,5,0.1,0)
        tb.BackgroundColor3 = Color3.fromRGB(30,23,39)
        tb.BorderSizePixel = 0
        tb.TextColor3 = Color3.new(1,1,1)
        tb.TextSize = 16
        tb.Text = tostring(default)
        mkCorner(tb)
        return lbl, tb
    end

    local speedLbl, speedBox = makeLabeledTextbox("Speed", Frame, config.speed, UDim2.new(0.05,0,0.23,0))
    local fb1Opt = Instance.new("TextLabel", Frame)
    fb1Opt.BackgroundTransparency = 1
    fb1Opt.Position = UDim2.new(0.05,0,0.36,0)
    fb1Opt.Size = UDim2.new(0,180,0,30)
    fb1Opt.Font = Enum.Font.Unknown
    fb1Opt.Text = "CoinVisual fullbag reset"
    fb1Opt.TextColor3 = Color3.fromRGB(230,230,230)
    fb1Opt.TextSize = 18
    fb1Opt.TextXAlignment = Enum.TextXAlignment.Left

    local fb1Btn = Instance.new("TextButton", fb1Opt)
    fb1Btn.Size = UDim2.new(0,50,0,24)
    fb1Btn.Position = UDim2.new(1,0,0.1,0)
    fb1Btn.Font = Enum.Font.Unknown
    fb1Btn.Text = "No"
    mkCorner(fb1Btn)

    local fb2Opt = fb1Opt:Clone()
    fb2Opt.Parent = Frame
    fb2Opt.Position = UDim2.new(0.05,0,0.49,0)
    fb2Opt.Text = "MeshPart fullbag reset"
    local fb2Btn = fb2Opt:FindFirstChildOfClass("TextButton")
    fb2Btn.Text = "No"

    local fb1Lbl, fb1Box = makeLabeledTextbox("CoinVisual goal", Frame, config.fullbag1Goal, UDim2.new(0.05,0,0.63,0))
    local fb2Lbl, fb2Box = makeLabeledTextbox("MeshPart goal", Frame, config.fullbag2Goal, UDim2.new(0.05,0,0.76,0))

    local mainBtn = Instance.new("TextButton", Frame)
    mainBtn.Size = UDim2.new(0,80,0,30)
    mainBtn.Position = UDim2.new(0.76,0,0.85,0)
    mainBtn.Font = Enum.Font.Unknown
    mainBtn.Text = "Enabled"
    makeLabeledTextbox; mkCorner(mainBtn)

    -- wiring
    speedBox.FocusLost:Connect(function(enter)
        if enter then
            local v=tonumber(speedBox.Text)
            if v then config.speed=v end
        end
    end)
    fb1Btn.MouseButton1Click:Connect(function()
        config.fullbag1Enabled = not config.fullbag1Enabled
        fb1Btn.Text = config.fullbag1Enabled and "Yes" or "No"
    end)
    fb2Btn.MouseButton1Click:Connect(function()
        config.fullbag2Enabled = not config.fullbag2Enabled
        fb2Btn.Text = config.fullbag2Enabled and "Yes" or "No"
    end)
    fb1Box.FocusLost:Connect(function(enter)
        if enter then
            local v=tonumber(fb1Box.Text)
            if v then config.fullbag1Goal=v end
        end
    end)
    fb2Box.FocusLost:Connect(function(enter)
        if enter then
            local v=tonumber(fb2Box.Text)
            if v then config.fullbag2Goal=v end
        end
    end)
    mainBtn.MouseButton1Click:Connect(function()
        config.enabled = not config.enabled
        mainBtn.Text = config.enabled and "Enabled" or "Paused"
    end)
end

-- CHARACTER/RESPAWN HANDLING
local function setupCharacter(char)
    counts1, counts2 = 0,0
    dirVel, rotVel = Vector3.zero, Vector3.zero
    targetCoin = nil

    -- zero-gravity & noclip & platform stand
    workspace.Gravity = 0
    if char:FindFirstChildOfClass("Humanoid") then
        char:FindFirstChildOfClass("Humanoid").PlatformStand = true
    end
end

Players.LocalPlayer.CharacterAdded:Connect(setupCharacter)
if Players.LocalPlayer.Character then
    setupCharacter(Players.LocalPlayer.Character)
end

-- COIN LOGIC
local function isCoinValid(part)
    if part.Name ~= "Coin_Server" then return false end
    for _,c in ipairs(part:GetDescendants()) do
        if c:IsA("BasePart") and c.Transparency <= 0.1 then
            return true
        end
    end
    return false
end

local function getClosestCoin(hrp)
    local best,bd = nil,math.huge
    for _,d in ipairs(workspace:GetDescendants()) do
        if d:IsA("BasePart") and d.Name=="Coin_Server" and isCoinValid(d) then
            local dist=(hrp.Position-d.Position).Magnitude
            if dist<bd and dist<=MAX_COIN_DISTANCE then
                bd, best = dist,d
            end
        end
    end
    return best
end

-- MOVEMENT & COLLECTION
RunService.Heartbeat:Connect(function(dt)
    local char = Players.LocalPlayer.Character
    if not char or not config.enabled then return end
    local hrp = char:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    -- reacquire
    if not targetCoin or not targetCoin:IsDescendantOf(workspace) or not isCoinValid(targetCoin) then
        targetCoin = getClosestCoin(hrp)
    end

    if targetCoin then
        local dist=(hrp.Position-targetCoin.Position).Magnitude
        local radius=targetCoin.Size.Magnitude/2+COIN_BUFFER
        if dist<=radius then
            -- count
            if targetCoin:FindFirstChild("CoinVisual") then
                counts1+=1
            else
                counts2+=1
            end
            -- fade
            for _,c in ipairs(targetCoin:GetDescendants()) do
                if c:IsA("BasePart") then
                    c.Transparency=0.5
                    c.CanCollide=false
                end
            end
            -- fullbag reset?
            if config.fullbag1Enabled and config.fullbag2Enabled then
                if counts1>=config.fullbag1Goal and counts2>=config.fullbag2Goal then
                    Players.LocalPlayer:LoadCharacter()
                end
            elseif config.fullbag1Enabled then
                if counts1>=config.fullbag1Goal then
                    Players.LocalPlayer:LoadCharacter()
                end
            elseif config.fullbag2Enabled then
                if counts2>=config.fullbag2Goal then
                    Players.LocalPlayer:LoadCharacter()
                end
            end
            targetCoin=nil
        else
            -- steering spring
            local desired=(targetCoin.Position-hrp.Position).Unit
            local dVel=desired-forward
            dirVel=(dirVel+dVel*45*dt)*math.exp(-1*dt)
            forward=(forward+dirVel*dt).Unit

            -- rotation spring
            local dLook=forward-hrp.CFrame.LookVector
            local aLook=dLook*700
            rotVel=(rotVel+aLook*dt)*math.exp(-10*dt)
            local lookDir=(hrp.CFrame.LookVector+rotVel*dt).Unit

            -- move
            local newPos=hrp.Position+forward*config.speed*dt
            hrp.CFrame=CFrame.new(newPos,newPos+lookDir)
        end
    end
end)
    ]]
    ls.Parent = StarterPlayerScripts
    print("âœ… AutoFarmScript injected into StarterPlayerScripts. Respawn once to start.")
else
    warn("AutoFarmScript already exists; delete it from StarterPlayerScripts to re-inject.")
end
